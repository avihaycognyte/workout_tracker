{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <h2 class="text-center">Workout Plan</h2>

    <!-- Filters Title -->
    <h4 class="text-center mt-4">Filter Exercises</h4>

    <!-- Filters for Exercises -->
    <div class="filters dropdown-group">
        <form id="filters-form" class="row gx-4 gy-3">
            {% for filter_name, filter_options in filters.items() %}
            <div class="col-lg-3 col-md-4 col-sm-6">
                <label for="{{ filter_name }}" class="form-label">{{ filter_name }}</label>
                <select id="{{ filter_name }}" class="form-select uniform-dropdown">
                    <option value="">All</option>
                    {% for option in filter_options %}
                    <option value="{{ option }}">{{ option }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endfor %}

            <!-- Routine Dropdown -->
            <div class="col-lg-3 col-md-4 col-sm-6">
                <label for="routine" class="form-label">Routine</label>
                <select id="routine" class="form-select uniform-dropdown">
                    {% for split_type, routines in routineOptions.items() %}
                    <optgroup label="{{ split_type }}">
                        {% for routine in routines %}
                        <option value="{{ routine }}">{{ routine }}</option>
                        {% endfor %}
                    </optgroup>
                    {% endfor %}
                </select>
            </div>
        </form>
    </div>

    <!-- Exercise Dropdown and Buttons -->
    <form id="add-exercise-form" class="mt-3">
        <div class="row align-items-center">
            <!-- Add Filters Button -->
            <div class="col-auto">
                <button id="filter-btn" class="btn btn-primary">Apply Filters</button>
            </div>

            <!-- Exercise Dropdown -->
            <div class="col-lg-4 col-md-6 text-center">
                <label for="exercise" class="form-label" style="text-align: center;">Exercise</label>
                <select id="exercise" class="form-select uniform-dropdown mx-auto">
                    {% for exercise in exercises %}
                    {% if exercise %}
                    <option value="{{ exercise }}">{{ exercise }}</option>
                    {% endif %}
                    {% endfor %}
                </select>
            </div>

            <!-- Add Exercise Button -->
            <div class="col-auto">
                <button id="add-exercise-btn" type="button" class="btn btn-success">Add Exercise</button>
            </div>
        </div>
    </form>

    <!-- Weight, Sets, RIR, Min Rep, Max Rep Inputs -->
    <div class="row gx-4 gy-3 mt-3">
        <div class="col-lg-2 col-md-3">
            <label for="weight" class="form-label">Weight</label>
            <input type="number" id="weight" class="form-control large-input" min="0" value="100">
        </div>
        <div class="col-lg-2 col-md-3">
            <label for="sets" class="form-label">Sets</label>
            <input type="number" id="sets" class="form-control large-input" min="1" value="1">
        </div>
        <div class="col-lg-2 col-md-3">
            <label for="rir" class="form-label">RIR</label>
            <input type="number" id="rir" class="form-control large-input" min="0" value="2">
        </div>
        <div class="col-lg-2 col-md-3">
            <label for="min_rep_range" class="form-label">Min Rep</label>
            <input type="number" id="min_rep_range" class="form-control large-input" min="1" value="3">
        </div>
        <div class="col-lg-2 col-md-3">
            <label for="max_rep_range" class="form-label">Max Rep</label>
            <input type="number" id="max_rep_range" class="form-control large-input" min="1" value="5">
        </div>
    </div>

    <!-- Display the Workout Plan -->
    <div class="workout-plan table-container mt-4">
        <h2 class="text-center" style="font-weight: bold; font-size: 1.8rem;">Your Workout Plan</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Routine</th>
                    <th>Exercise</th>
                    <th>Primary Muscle Group</th>
                    <th>Secondary Muscle Group</th>
                    <th>Tertiary Muscle Group</th>
                    <th>Sets</th>
                    <th>Min Rep Range</th>
                    <th>Max Rep Range</th>
                    <th>RIR</th>
                    <th>Weight</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="workout-plan-table-body">
                <!-- Dynamically populated via JavaScript -->
            </tbody>
        </table>
    </div>

    <!-- Export Button -->
    <div class="export-section mt-3 text-center">
        <button class="btn btn-primary" onclick="exportToExcel()">Export to Excel</button>
    </div>
</div>
{% endblock %}
